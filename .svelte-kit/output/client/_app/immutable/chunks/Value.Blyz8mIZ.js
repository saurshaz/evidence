import{s as z,b as O,j as C,f as y,e as b,t as N,d as k,r as q,u as V,k as p,A as D,n as S,g as F,i as E,P as Q,Q as T,w as K,x as U,y as W,z as X}from"./scheduler.BVCo5HCX.js";import{S as L,i as H,g as G,b as h,d as J,t as d,c as j,a as v,m as w,e as P}from"./index.C9mGAhn_.js";import{g as Y,d as Z}from"./VennDiagram.svelte_svelte_type_style_lang.ZGqga9CZ.js";import{Q as M}from"./index.C8RIryS8.js";import{a as x,g as $,s as ee,V as te,Q as re,E as ae}from"./colours.DRh5S-dq.js";import{c as le,g as ne,f as R}from"./CopyIcon.fK-JPSDA.js";function se(n){let t,r;return t=new te({props:{error:n[1]}}),{c(){j(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,a){w(t,e,a),r=!0},p(e,a){const l={};a&2&&(l.error=e[1]),t.$set(l)},i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){h(t.$$.fragment,e),r=!1},d(e){P(t,e)}}}function oe(n){let t,r=R(n[3],n[2])+"",e;return{c(){t=b("span"),e=N(r)},l(a){t=k(a,"SPAN",{});var l=q(t);e=V(l,r),l.forEach(y)},m(a,l){C(a,t,l),p(t,e)},p(a,l){l&12&&r!==(r=R(a[3],a[2])+"")&&D(e,r)},i:S,o:S,d(a){a&&y(t)}}}function ue(n){let t,r,e,a,l,s="Placeholder: no data currently referenced.";return{c(){t=b("span"),r=N("["),e=N(n[0]),a=N("]"),l=b("span"),l.textContent=s,this.h()},l(f){t=k(f,"SPAN",{class:!0});var o=q(t);r=V(o,"["),e=V(o,n[0]),a=V(o,"]"),l=k(o,"SPAN",{class:!0,"data-svelte-h":!0}),F(l)!=="svelte-ddarzq"&&(l.textContent=s),o.forEach(y),this.h()},h(){E(l,"class","error-msg svelte-11norvs"),E(t,"class","placeholder svelte-11norvs")},m(f,o){C(f,t,o),p(t,r),p(t,e),p(t,a),p(t,l)},p(f,o){o&1&&D(e,f[0])},i:S,o:S,d(f){f&&y(t)}}}function fe(n){let t,r,e,a;const l=[ue,oe,se],s=[];function f(o,c){return o[0]?0:o[1]?2:1}return t=f(n),r=s[t]=l[t](n),{c(){r.c(),e=O()},l(o){r.l(o),e=O()},m(o,c){s[t].m(o,c),C(o,e,c),a=!0},p(o,[c]){let _=t;t=f(o),t===_?s[t].p(o,c):(G(),h(s[_],1,1,()=>{s[_]=null}),J(),r=s[t],r?r.p(o,c):(r=s[t]=l[t](o),r.c()),d(r,1),r.m(e.parentNode,e))},i(o){a||(d(r),a=!0)},o(o){h(r),a=!1},d(o){o&&y(e),s[t].d(o)}}}function ce(n,t,r){let{data:e=null}=t,{row:a=0}=t,{column:l=null}=t,{value:s=null}=t,{placeholder:f=null}=t,{fmt:o=void 0}=t,c,_,g,m;return n.$$set=u=>{"data"in u&&r(4,e=u.data),"row"in u&&r(6,a=u.row),"column"in u&&r(5,l=u.column),"value"in u&&r(7,s=u.value),"placeholder"in u&&r(0,f=u.placeholder),"fmt"in u&&r(8,o=u.fmt)},n.$$.update=()=>{var u;if(n.$$.dirty&160&&r(5,l=l??s),n.$$.dirty&883)try{if(r(1,g=void 0),!f)if(e){if(typeof e=="string")throw Error(`Received: data=${e}, expected: data={${e}}`);if(Array.isArray(e)||r(4,e=[e]),isNaN(a))throw Error("row must be a number (row="+a+")");try{Object.keys(e[a])[0]}catch{throw Error("Row "+a+" does not exist in the dataset")}r(5,l=l??Object.keys(e[a])[0]),x(e,[l]),r(9,m=$(e,"array"));const A=m.filter(i=>{var I;return i.type==="date"&&!(((I=e[0])==null?void 0:I[i.id])instanceof Date)}).map(i=>i.id);for(let i=0;i<A.length;i++)r(4,e=le(e,A[i]));r(3,_=e[a][l]),r(9,m=m.filter(i=>i.id===l)),o?r(2,c=ne(o,(u=m[0].format)==null?void 0:u.valueType)):r(2,c=m[0].format)}else throw Error("No data provided. If you referenced a query result, check that the name is correct.")}catch(A){if(r(1,g=A.message),console.error("\x1B[31m%s\x1B[0m",`Error in Value: ${g}`),ee)throw g}n.$$.dirty&160&&s&&l&&console.warn('Both "value" and "column" were supplied as props to Value. "value" will be ignored.')},[f,g,c,_,e,l,a,s,o,m]}class ie extends L{constructor(t){super(),H(this,t,ce,fe,z,{data:4,row:6,column:5,value:7,placeholder:0,fmt:8})}}function me(n){let t;const r=n[7].default,e=K(r,n,n[8],null);return{c(){e&&e.c()},l(a){e&&e.l(a)},m(a,l){e&&e.m(a,l),t=!0},p(a,l){e&&e.p&&(!t||l&256)&&U(e,r,a,a[8],t?X(r,a[8],l,null):W(a[8]),null)},i(a){t||(d(e,a),t=!0)},o(a){h(e,a),t=!1},d(a){e&&e.d(a)}}}function de(n){let t,r;const e=[n[4],{data:M.isQuery(n[11])?Array.from(n[11]):n[11]}];let a={$$slots:{default:[me]},$$scope:{ctx:n}};for(let l=0;l<e.length;l+=1)a=Q(a,e[l]);return t=new ie({props:a}),{c(){j(t.$$.fragment)},l(l){v(t.$$.fragment,l)},m(l,s){w(t,l,s),r=!0},p(l,s){const f=s&2064?Y(e,[s&16&&Z(l[4]),s&2048&&{data:M.isQuery(l[11])?Array.from(l[11]):l[11]}]):{};s&256&&(f.$$scope={dirty:s,ctx:l}),t.$set(f)},i(l){r||(d(t.$$.fragment,l),r=!0)},o(l){h(t.$$.fragment,l),r=!1},d(l){P(t,l)}}}function B(n){let t,r;return t=new ae({props:{emptyMessage:n[2],emptySet:n[1],chartType:ye,isInitial:n[3]}}),{c(){j(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,a){w(t,e,a),r=!0},p(e,a){const l={};a&4&&(l.emptyMessage=e[2]),a&2&&(l.emptySet=e[1]),a&8&&(l.isInitial=e[3]),t.$set(l)},i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){h(t.$$.fragment,e),r=!1},d(e){P(t,e)}}}function _e(n){let t,r,e=!n[4].placeholder&&B(n);return{c(){t=b("span"),e&&e.c(),this.h()},l(a){t=k(a,"SPAN",{slot:!0});var l=q(t);e&&e.l(l),l.forEach(y),this.h()},h(){E(t,"slot","empty")},m(a,l){C(a,t,l),e&&e.m(t,null),r=!0},p(a,l){a[4].placeholder?e&&(G(),h(e,1,1,()=>{e=null}),J()):e?(e.p(a,l),l&16&&d(e,1)):(e=B(a),e.c(),d(e,1),e.m(t,null))},i(a){r||(d(e),r=!0)},o(a){h(e),r=!1},d(a){a&&y(t),e&&e.d()}}}function he(n){let t,r="Loading...";return{c(){t=b("span"),t.textContent=r,this.h()},l(e){t=k(e,"SPAN",{slot:!0,class:!0,"data-svelte-h":!0}),F(t)!=="svelte-exu0be"&&(t.textContent=r),this.h()},h(){E(t,"slot","skeleton"),E(t,"class","text-gray-500")},m(e,a){C(e,t,a)},p:S,d(e){e&&y(t)}}}function ge(n){let t,r;return t=new re({props:{data:n[0],$$slots:{skeleton:[he],empty:[_e],default:[de,({loaded:e})=>({11:e}),({loaded:e})=>e?2048:0]},$$scope:{ctx:n}}}),{c(){j(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,a){w(t,e,a),r=!0},p(e,[a]){const l={};a&1&&(l.data=e[0]),a&2334&&(l.$$scope={dirty:a,ctx:e}),t.$set(l)},i(e){r||(d(t.$$.fragment,e),r=!0)},o(e){h(t.$$.fragment,e),r=!1},d(e){P(t,e)}}}let ye="Value";function pe(n,t,r){let e,{$$slots:a={},$$scope:l}=t,{data:s}=t,{column:f}=t,{agg:o}=t;const c=M.isQuery(s)?s.hash:void 0;let _=(s==null?void 0:s.hash)===c,{emptySet:g=void 0}=t,{emptyMessage:m=void 0}=t;return n.$$set=u=>{r(10,t=Q(Q({},t),T(u))),"data"in u&&r(0,s=u.data),"column"in u&&r(5,f=u.column),"agg"in u&&r(6,o=u.agg),"emptySet"in u&&r(1,g=u.emptySet),"emptyMessage"in u&&r(2,m=u.emptyMessage),"$$scope"in u&&r(8,l=u.$$scope)},n.$$.update=()=>{n.$$.dirty&97&&o&&r(0,s=s.groupBy(void 0).agg({[o]:{col:f,as:f}})),n.$$.dirty&1&&r(3,_=(s==null?void 0:s.hash)===c),r(4,e=Object.fromEntries(Object.entries(t).filter(([,u])=>u!==void 0)))},t=T(t),[s,g,m,_,e,f,o,a,l]}class Ne extends L{constructor(t){super(),H(this,t,pe,ge,z,{data:0,column:5,agg:6,emptySet:1,emptyMessage:2})}}export{Ne as V};
