import{s as mt,b as Y,j as q,n as Le,f as D,M as mi,e as V,d as U,r as W,i as I,v as b,I as Me,J as de,a as te,c as re,H as _r,g as ti,k as R,F as gi,E as ge,O as di,a4 as Nr,a5 as yi,P as ct,Q as yr,t as ri,u as ii,V as Br,A as ni,Y as jt,Z as zt,U as bi,l as _i,o as Gr,w as li,x as oi,y as si,z as fi}from"./scheduler.BVCo5HCX.js";import{S as gt,i as dt,h as pi,c as Q,a as K,m as Z,t as H,g as ft,b as P,d as at,e as J}from"./index.C9mGAhn_.js";import{N as pr,i as Cr,h as Ci,O as wi,e as Hr,g as ki,d as Si}from"./VennDiagram.svelte_svelte_type_style_lang.COvZ985M.js";import{h as st,u as v,D as ai,C as Oi,i as Ti,n as Ai,e as Pr,a as qr,g as mr,f as Xe,s as Li,p as Mi,c as Di,b as ci,E as ui,Q as Ei}from"./colours.CiCpy17i.js";import{j as xi,g as Fr,Q as br}from"./index.DAWWTyat.js";import{w as Wr}from"./entry.ZsnkuR_y.js";import{f as Ii}from"./index.DfddKQGg.js";import{t as Ke,m as gr,s as ji,g as Re,a as Nt,f as Ye}from"./CopyIcon.5MOzTE6L.js";function Vr(i){return t=>t.map(r=>{var n;const l={},s=Object.keys(r);for(const f of s){const o=(n=i[f])!=null?n:f;l[o]=r[f]}return l})}function zi(i,e){if(i.length===0||e.length===0)return{};const t=Object.keys(i[0]),r=Object.keys(e[0]),n={};for(const l of t)r.includes(l)&&(n[l]=l);return n}function Ni(i,e,t){for(const r in t){const n=t[r];if(i[n]!==e[r])return!1}return!0}function Bi(i,e){return r=>{if(!i.length)return r;const n=zi(r,i),l=Object.keys(i[0]);return r.flatMap(f=>{const o=i.filter(g=>Ni(f,g,n));if(o.length)return o.map(g=>({...f,...g}));const u=Object.fromEntries(l.filter(g=>f[g]==null).map(g=>[g,void 0]));return{...f,...u}})}}function Ur(i){return t=>{const r=t.map(n=>({...n}));for(const n in i){const l=i[n],s=typeof l=="function"?l(r):l,f=s!=null&&s[Symbol.iterator]&&typeof s!="string"?s:t.map(()=>s);let o=-1;for(const u of r)u[n]=f[++o]}return r}}function Gi(i){return t=>{const r=Pi(i),n=[];for(const l in r){const s=r[l];let f;typeof s=="function"?f=s(t):Array.isArray(s)?f=s:f=Array.from(new Set(t.map(o=>o[l]))),n.push(f.map(o=>({[l]:o})))}return Hi(n)}}function Hi(i){function e(r,n,l){if(!l.length&&n!=null){r.push(n);return}const s=l[0],f=l.slice(1);for(const o of s)e(r,{...n,...o},f)}const t=[];return e(t,null,i),t}function Pi(i){if(Array.isArray(i)){const e={};for(const t of i)e[t]=t;return e}else if(typeof i=="object")return i;return{[i]:i}}function qi(i){return t=>{const r=[];for(const n of t){const l={...n};for(const s in i)l[s]==null&&(l[s]=i[s]);r.push(l)}return r}}function Xr(i,e){return r=>{const n=Gi(i)(r),l=Bi(r)(n);return e?qi(e)(l):l}}function Rr(i,e,t){return i==null||e==null?void 0:e===0&&i===0?0:!t&&e===0?void 0:i/e}function Yr(i,e,t){const r=typeof i=="function"?i:f=>f[i],n=f=>f[e],{predicate:l,allowDivideByZero:s}={};return l==null?(f,o,u)=>{const g=n(f),a=r(f,o,u);return Rr(a,g,s)}:(f,o,u)=>{if(!l(f,o,u))return;const g=n(f),a=r(f,o,u);return Rr(a,g,s)}}const Bt=v.grey500,Gt=v.grey500,Ht=v.grey500,Pt=v.grey200,Qr="white",Fi=v.grey500,Wi=v.grey600,Vi=v.grey500,Ui=v.grey400,Xi="white",Ri=v.grey900,Yi=v.grey800,Qi=v.grey700,wr={darkMode:!1,textStyle:{fontFamily:"sans-serif"},grid:{left:"0%",right:"4%",bottom:"0%",top:"15%",containLabel:!0},color:st,backgroundColor:"rgba(255, 255, 255, 0)",title:{padding:0,itemGap:7,textStyle:{fontSize:14,color:Yi},subtextStyle:{fontSize:13,color:Qi,overflow:"break"},top:"0%"},line:{itemStyle:{borderWidth:0},lineStyle:{width:2,join:"round"},symbolSize:0,symbol:"circle",smooth:!1},radar:{itemStyle:{borderWidth:0},lineStyle:{width:2},symbolSize:0,symbol:"circle",smooth:!1},pie:{itemStyle:{borderWidth:0,borderColor:"#cccccc"}},scatter:{itemStyle:{borderWidth:0,borderColor:"#cccccc"}},boxplot:{itemStyle:{borderWidth:1.5}},parallel:{itemStyle:{borderWidth:0,borderColor:"#cccccc"}},sankey:{itemStyle:{borderWidth:0,borderColor:"#cccccc"}},funnel:{itemStyle:{borderWidth:0,borderColor:"#cccccc"}},gauge:{itemStyle:{borderWidth:0,borderColor:"#cccccc"}},candlestick:{itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderWidth:1}},graph:{itemStyle:{borderWidth:0,borderColor:"#cccccc"},lineStyle:{width:1,color:"#aaaaaa"},symbolSize:0,symbol:"circle",smooth:!1,color:["#923d59","#488f96","#518eca","#b3a9a0","#ffc857","#495867","#bfdbf7","#bc4749","#eeebd0"],label:{color:"#f2f2f2"}},map:{itemStyle:{areaColor:"#eee",borderColor:"#444",borderWidth:.5},label:{color:"#000"},emphasis:{itemStyle:{areaColor:"rgba(255,215,0,0.8)",borderColor:"#444",borderWidth:1},label:{color:"rgb(100,0,0)"}}},geo:{itemStyle:{areaColor:"#eee",borderColor:"#444",borderWidth:.5},label:{color:"#000"},emphasis:{itemStyle:{areaColor:"rgba(255,215,0,0.8)",borderColor:"#444",borderWidth:1},label:{color:"rgb(100,0,0)"}}},categoryAxis:{axisLine:{show:!0,lineStyle:{color:Bt}},axisTick:{show:!1,lineStyle:{color:Gt},length:3,alignWithLabel:!0},axisLabel:{show:!0,color:Ht},splitLine:{show:!1,lineStyle:{color:[Pt]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},valueAxis:{axisLine:{show:!1,lineStyle:{color:Bt}},axisTick:{show:!1,lineStyle:{color:Gt},length:2},axisLabel:{show:!0,color:Ht},splitLine:{show:!0,lineStyle:{color:[Pt],width:1}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}},nameTextStyle:{backgroundColor:Qr}},logAxis:{axisLine:{show:!1,lineStyle:{color:Bt}},axisTick:{show:!1,lineStyle:{color:Gt},length:2},axisLabel:{show:!0,color:Ht},splitLine:{show:!0,lineStyle:{color:[Pt]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}},nameTextStyle:{backgroundColor:Qr}},timeAxis:{axisLine:{show:!0,lineStyle:{color:Bt}},axisTick:{show:!0,lineStyle:{color:Gt},length:3},axisLabel:{show:!0,color:Ht},splitLine:{show:!1,lineStyle:{color:[Pt]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},toolbox:{iconStyle:{borderColor:"#999999"},emphasis:{iconStyle:{borderColor:"#459cde"}}},legend:{textStyle:{padding:[0,0,0,-7],color:Fi},icon:"circle",pageIcons:{horizontal:["M 17 3 h 2 c 0.386 0 0.738 0.223 0.904 0.572 s 0.115 0.762 -0.13 1.062 L 11.292 15 l 8.482 10.367 c 0.245 0.299 0.295 0.712 0.13 1.062 S 19.386 27 19 27 h -2 c -0.3 0 -0.584 -0.135 -0.774 -0.367 l -9 -11 c -0.301 -0.369 -0.301 -0.898 0 -1.267 l 9 -11 C 16.416 3.135 16.7 3 17 3 Z","M 12 27 h -2 c -0.386 0 -0.738 -0.223 -0.904 -0.572 s -0.115 -0.762 0.13 -1.062 L 17.708 15 L 9.226 4.633 c -0.245 -0.299 -0.295 -0.712 -0.13 -1.062 S 9.614 3 10 3 h 2 c 0.3 0 0.584 0.135 0.774 0.367 l 9 11 c 0.301 0.369 0.301 0.898 0 1.267 l -9 11 C 12.584 26.865 12.3 27 12 27 Z"]},pageIconColor:Wi,pageIconSize:12,pageTextStyle:{color:Vi},pageButtonItemGap:-2,animationDurationUpdate:300},tooltip:{axisPointer:{lineStyle:{color:"#cccccc",width:1},crossStyle:{color:"#cccccc",width:1}},borderRadius:4,borderWidth:1,borderColor:Ui,backgroundColor:Xi,textStyle:{color:Ri,fontSize:12,fontWeight:400},padding:6},timeline:{lineStyle:{color:"#e3e3e3",width:2},itemStyle:{color:"#d6d6d6",borderWidth:1},controlStyle:{color:"#bfbfbf",borderColor:"#bfbfbf",borderWidth:1},checkpointStyle:{color:"#8f8f8f",borderColor:"#ffffff"},label:{color:"#c9c9c9"},emphasis:{itemStyle:{color:"#9c9c9c"},controlStyle:{color:"#bfbfbf",borderColor:"#bfbfbf",borderWidth:1},label:{color:"#c9c9c9"}}},visualMap:{color:["#c41621","#e39588","#f5ed98"]},dataZoom:{handleSize:"undefined%",textStyle:{}},markPoint:{label:{color:"#f2f2f2"},emphasis:{label:{color:"#f2f2f2"}}}},Qe=500,Ki=(i,e)=>{const t=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)&&i.clientWidth*3*i.clientHeight*3>16777215;pr("evidence-light",wr);const r=Cr(i,"evidence-light",{renderer:t?"svg":e.renderer??"canvas"});e.connectGroup&&(r.group=e.connectGroup,Ci(e.connectGroup));const n=()=>{if(e.seriesColors){const d=r.getOption();if(!d)return;const T={...d};for(const E of Object.keys(e.seriesColors)){const C=d.series.findIndex(p=>p.name===E);C!==-1&&(T.series[C]={...T.series[C],itemStyle:{...T.series[C].itemStyle,color:e.seriesColors[E]}})}r.setOption(T),e.contextmenuEnabled&&document.addEventListener("contextmenu",E=>!1)}},l=()=>{e.echartsOptions&&r.setOption({...e.echartsOptions})},s=()=>{let d=[];if(e.seriesOptions){const T=e.config.series.reduce((E,{evidenceSeriesType:C},p)=>((C==="reference_line"||C==="reference_area")&&E.push(p),E),[]);for(let E=0;E<e.config.series.length;E++)T.includes(E)?d.push({}):d.push({...e.seriesOptions});r.setOption({series:d})}};console.log(">>> ***** echarts.js ***** >>> echart initialized ",e),r.setOption({...e.config,animationDuration:Qe,animationDurationUpdate:Qe}),n(),l(),s();const f=e.dispatch;r.on("click",function(d){console.log("click detected >>",d),f("click",d)});const o=r._dom.parentElement.previousElementSibling,u=d=>{o.style.display="block"},g=({top:d,left:T})=>{o.style.left=`${T}px`,o.style.top=`${d}px`,u()};e.contextmenuEnabled&&r.on("contextmenu",function(d){event.preventDefault(),console.log(" ***** chart contextmenu params ***** >>> ",d),window.__selectedContextMenuParams=d;const T={left:event.pageX,top:event.pageY};return g(T),f("contextmenu",d),!1}),r.on("dblclick",function(d){console.log("dblclick detected >>",d),window.__dblclickParams=d,f("dblclick",d),e.dblclickHandler(d),window.__dblclickParams=""});const a=document.getElementById("evidence-main-article"),h=i.parentElement,k=xi(()=>{r.resize({animation:{duration:Qe}}),A()},100);let _;window.ResizeObserver&&a?(_=new ResizeObserver(k),_.observe(a),_.observe(h)):window.addEventListener("resize",k);const A=()=>{if(e.showAllXAxisLabels){const d=r.getOption();if(!d)return;const T=new Set(d.series.flatMap(p=>{var j;return(j=p.data)==null?void 0:j.map(O=>O[0])})),E=4/5,C=(i==null?void 0:i.clientWidth)??0;if(!e.swapXY){const p={xAxis:{axisLabel:{interval:0,overflow:"truncate",width:C*E/T.size}}};r.setOption(p)}}},z=d=>{e=d,console.log(" **** ***** updateChart from echarts.js *** "),r.setOption({...e.config,animationDuration:Qe,animationDurationUpdate:Qe},!0),n(),l(),s(),r.resize({animation:{duration:Qe}}),A()};return k(),{update(d){z(d)},destroy(){_?(_.unobserve(a),_.unobserve(h)):window.removeEventListener("resize",k),r.dispose()}}},Zi=(i,e)=>{pr("evidence-light",wr);const t=Cr(i,"evidence-light",{renderer:"canvas"});e.config.animation=!1,t.setOption(e.config);const r=()=>{if(e.seriesColors){const u=t.getOption();if(!u)return;const g={...u};for(const a of Object.keys(e.seriesColors)){const h=u.series.findIndex(k=>k.name===a);h!==-1&&(g.series[h]={...g.series[h],itemStyle:{...g.series[h].itemStyle,color:e.seriesColors[a]}})}t.setOption(g)}},n=()=>{e.echartsOptions&&t.setOption({...e.echartsOptions})},l=()=>{let u=[];if(e.seriesOptions){const g=e.config.series.reduce((a,{evidenceSeriesType:h},k)=>((h==="reference_line"||h==="reference_area")&&a.push(k),a),[]);for(let a=0;a<e.config.series.length;a++)g.includes(a)?u.push({}):u.push({...e.seriesOptions});t.setOption({series:u})}};n(),r(),l();let s=t.getConnectedDataURL({type:"png",pixelRatio:3,backgroundColor:"white",excludeComponents:["toolbox"]});const f=new Date,o=new Date(f.getTime()-f.getTimezoneOffset()*6e4).toISOString().slice(0,19).replaceAll(":","-");return wi(s,(e.evidenceChartTitle??e.queryID??"evidence-chart")+`_${o}.png`),t.dispose(),{destroy(){t.dispose()}}},ut=(i,e)=>{pr("evidence-light",wr);const{config:t,ratio:r,echartsOptions:n,seriesOptions:l,seriesColors:s,isMap:f,extraHeight:o,width:u}=e;let g={renderer:"canvas"};f&&(g.height=u*.5+o,i&&i.parentNode&&(i.style.height=g.height+"px",i.parentNode.style.height=g.height+"px"));const a=Cr(i,"evidence-light",g);console.log(" >>> echart initialized >>> "),t.animation=!1,a.setOption(t),n&&a.setOption(n);const h=()=>{if(s){const z=a.getOption();if(!z)return;const d={...z};for(const T of Object.keys(s)){const E=z.series.findIndex(C=>C.name===T);E!==-1&&(d.series[E]={...d.series[E],itemStyle:{...d.series[E].itemStyle,color:s[T]}})}a.setOption(d)}},k=()=>{n&&a.setOption({...n})},_=()=>{let z=[];if(l){const d=t.series.reduce((T,{evidenceSeriesType:E},C)=>((E==="reference_line"||E==="reference_area")&&T.push(C),T),[]);for(let T=0;T<t.series.length;T++)d.includes(T)?z.push({}):z.push({...l});a.setOption({series:z})}};k(),h(),_();let A=a.getConnectedDataURL({type:"jpeg",pixelRatio:r,backgroundColor:"#fff",excludeComponents:["toolbox"]});i.innerHTML=`<img src=${A} width="100%" style="
        position: absolute; 
        top: 0;
        user-select: all;
        -webkit-user-select: all;
        -moz-user-select: all;
        -ms-user-select: all;
    " />`,e.config.animation=!0};function Ji(i){let e;function t(l,s){return l[10]?en:$i}let r=t(i),n=r(i);return{c(){n.c(),e=Y()},l(l){n.l(l),e=Y()},m(l,s){n.m(l,s),q(l,e,s)},p(l,s){r===(r=t(l))&&n?n.p(l,s):(n.d(1),n=r(l),n&&(n.c(),n.m(e.parentNode,e)))},d(l){l&&D(e),n.d(l)}}}function vi(i){let e,t,r,n;return{c(){e=V("div"),this.h()},l(l){e=U(l,"DIV",{class:!0,style:!0}),W(e).forEach(D),this.h()},h(){I(e,"class","chart"),b(e,"height",i[1]),b(e,"width",i[2]),b(e,"margin-left","0"),b(e,"margin-top","15px"),b(e,"margin-bottom","10px"),b(e,"overflow","visible"),b(e,"break-inside","avoid")},m(l,s){q(l,e,s),r||(n=Me(t=ut.call(null,e,{config:i[0],ratio:2,echartsOptions:i[5],seriesOptions:i[6],seriesColors:i[7]})),r=!0)},p(l,s){s&2&&b(e,"height",l[1]),s&4&&b(e,"width",l[2]),t&&de(t.update)&&s&225&&t.update.call(null,{config:l[0],ratio:2,echartsOptions:l[5],seriesOptions:l[6],seriesColors:l[7]})},d(l){l&&D(e),r=!1,n()}}}function $i(i){let e,t,r,n,l,s,f;return{c(){e=V("div"),r=te(),n=V("div"),this.h()},l(o){e=U(o,"DIV",{class:!0,style:!0}),W(e).forEach(D),r=re(o),n=U(o,"DIV",{class:!0,style:!0}),W(n).forEach(D),this.h()},h(){I(e,"class","chart md:hidden"),b(e,"height",i[1]),b(e,"width","650px"),b(e,"margin-left","0"),b(e,"margin-top","15px"),b(e,"margin-bottom","10px"),b(e,"overflow","visible"),b(e,"break-inside","avoid"),I(n,"class","chart hidden md:block"),b(n,"height",i[1]),b(n,"width","841px"),b(n,"margin-left","0"),b(n,"margin-top","15px"),b(n,"margin-bottom","10px"),b(n,"overflow","visible"),b(n,"break-inside","avoid")},m(o,u){q(o,e,u),q(o,r,u),q(o,n,u),s||(f=[Me(t=ut.call(null,e,{config:i[0],ratio:4,echartsOptions:i[5],seriesOptions:i[6],seriesColors:i[7],isMap:i[8],extraHeight:i[9],width:650})),Me(l=ut.call(null,n,{config:i[0],ratio:4,echartsOptions:i[5],seriesOptions:i[6],seriesColors:i[7],isMap:i[8],extraHeight:i[9],width:841}))],s=!0)},p(o,u){u&2&&b(e,"height",o[1]),t&&de(t.update)&&u&993&&t.update.call(null,{config:o[0],ratio:4,echartsOptions:o[5],seriesOptions:o[6],seriesColors:o[7],isMap:o[8],extraHeight:o[9],width:650}),u&2&&b(n,"height",o[1]),l&&de(l.update)&&u&993&&l.update.call(null,{config:o[0],ratio:4,echartsOptions:o[5],seriesOptions:o[6],seriesColors:o[7],isMap:o[8],extraHeight:o[9],width:841})},d(o){o&&(D(e),D(r),D(n)),s=!1,_r(f)}}}function en(i){let e,t,r,n,l,s,f;return{c(){e=V("div"),r=te(),n=V("div"),this.h()},l(o){e=U(o,"DIV",{class:!0,style:!0}),W(e).forEach(D),r=re(o),n=U(o,"DIV",{class:!0,style:!0}),W(n).forEach(D),this.h()},h(){I(e,"class","chart md:hidden"),b(e,"height",i[1]),b(e,"width",i[12]+"px"),b(e,"margin-left","0"),b(e,"margin-top","15px"),b(e,"margin-bottom","10px"),b(e,"overflow","visible"),b(e,"break-inside","avoid"),I(n,"class","chart hidden md:block"),b(n,"height",i[1]),b(n,"width",i[11]+"px"),b(n,"margin-left","0"),b(n,"margin-top","15px"),b(n,"margin-bottom","10px"),b(n,"overflow","visible"),b(n,"break-inside","avoid")},m(o,u){q(o,e,u),q(o,r,u),q(o,n,u),s||(f=[Me(t=ut.call(null,e,{config:i[0],ratio:4,echartsOptions:i[5],seriesOptions:i[6],seriesColors:i[7],isMap:i[8],extraHeight:i[9],width:i[12]})),Me(l=ut.call(null,n,{config:i[0],ratio:4,echartsOptions:i[5],seriesOptions:i[6],seriesColors:i[7],isMap:i[8],extraHeight:i[9],width:i[11]}))],s=!0)},p(o,u){u&2&&b(e,"height",o[1]),u&4096&&b(e,"width",o[12]+"px"),t&&de(t.update)&&u&5089&&t.update.call(null,{config:o[0],ratio:4,echartsOptions:o[5],seriesOptions:o[6],seriesColors:o[7],isMap:o[8],extraHeight:o[9],width:o[12]}),u&2&&b(n,"height",o[1]),u&2048&&b(n,"width",o[11]+"px"),l&&de(l.update)&&u&3041&&l.update.call(null,{config:o[0],ratio:4,echartsOptions:o[5],seriesOptions:o[6],seriesColors:o[7],isMap:o[8],extraHeight:o[9],width:o[11]})},d(o){o&&(D(e),D(r),D(n)),s=!1,_r(f)}}}function tn(i){let e;function t(l,s){if(l[3])return vi;if(l[4])return Ji}let r=t(i),n=r&&r(i);return{c(){n&&n.c(),e=Y()},l(l){n&&n.l(l),e=Y()},m(l,s){n&&n.m(l,s),q(l,e,s)},p(l,[s]){r===(r=t(l))&&n?n.p(l,s):(n&&n.d(1),n=r&&r(l),n&&(n.c(),n.m(e.parentNode,e)))},i:Le,o:Le,d(l){l&&D(e),n&&n.d(l)}}}function rn(i,e,t){let r,n,l,s,{config:f=void 0}=e,{height:o="291px"}=e,{width:u="100%"}=e,{copying:g=!1}=e,{printing:a=!1}=e,{echartsOptions:h=void 0}=e,{seriesOptions:k=void 0}=e,{seriesColors:_=void 0}=e,{isMap:A=!1}=e,{extraHeight:z=void 0}=e,d=!1,T,E;const C=mi("gridConfig");return C&&(d=!0,{cols:T,gapWidth:E}=C),i.$$set=p=>{"config"in p&&t(0,f=p.config),"height"in p&&t(1,o=p.height),"width"in p&&t(2,u=p.width),"copying"in p&&t(3,g=p.copying),"printing"in p&&t(4,a=p.printing),"echartsOptions"in p&&t(5,h=p.echartsOptions),"seriesOptions"in p&&t(6,k=p.seriesOptions),"seriesColors"in p&&t(7,_=p.seriesColors),"isMap"in p&&t(8,A=p.isMap),"extraHeight"in p&&t(9,z=p.extraHeight)},i.$$.update=()=>{i.$$.dirty&8192&&t(16,r=Math.min(Number(T),2)),i.$$.dirty&81920&&t(12,n=(650-Number(E)*(r-1))/r),i.$$.dirty&8192&&t(15,l=Math.min(Number(T),3)),i.$$.dirty&49152&&t(11,s=(841-Number(E)*(l-1))/l)},[f,o,u,g,a,h,k,_,A,z,d,s,n,T,E,l,r]}class nn extends gt{constructor(e){super(),dt(this,e,rn,tn,mt,{config:0,height:1,width:2,copying:3,printing:4,echartsOptions:5,seriesOptions:6,seriesColors:7,isMap:8,extraHeight:9})}}function ln(i){let e,t,r="Loading...",n,l,s;return{c(){e=V("div"),t=V("span"),t.textContent=r,n=te(),l=V("div"),this.h()},l(f){e=U(f,"DIV",{role:!0,class:!0});var o=W(e);t=U(o,"SPAN",{class:!0,"data-svelte-h":!0}),ti(t)!=="svelte-1wtojot"&&(t.textContent=r),n=re(o),l=U(o,"DIV",{class:!0,style:!0}),W(l).forEach(D),o.forEach(D),this.h()},h(){I(t,"class","sr-only"),I(l,"class","bg-gray-200 rounded-md dark:bg-gray-400 max-w-[100%]"),b(l,"height",i[0]),b(l,"margin-top","15px"),b(l,"margin-bottom","31px"),I(e,"role","status"),I(e,"class","animate-pulse")},m(f,o){q(f,e,o),R(e,t),R(e,n),R(e,l)},p(f,[o]){o&1&&b(l,"height",f[0])},i(f){f&&(s||gi(()=>{s=pi(e,Ii,{}),s.start()}))},o:Le,d(f){f&&D(e)}}}function on(i,e,t){let{height:r="231px"}=e;return i.$$set=n=>{"height"in n&&t(0,r=n.height)},[r]}class sn extends gt{constructor(e){super(),dt(this,e,on,ln,mt,{height:0})}}function Kr(i,e,t){const r=i.slice();return r[28]=e[t],r}function Zr(i){let e,t=i[28].key+"",r,n,l,s;return{c(){e=V("li"),r=ri(t),this.h()},l(f){e=U(f,"LI",{class:!0});var o=W(e);r=ii(o,t),o.forEach(D),this.h()},h(){I(e,"class",n=Br(i[28].menuClass)+" svelte-19r8f8")},m(f,o){q(f,e,o),R(e,r),l||(s=ge(e,"click",function(){de(i[2])&&i[2].apply(this,arguments)}),l=!0)},p(f,o){i=f,o[0]&2&&t!==(t=i[28].key+"")&&ni(r,t),o[0]&2&&n!==(n=Br(i[28].menuClass)+" svelte-19r8f8")&&I(e,"class",n)},d(f){f&&D(e),l=!1,s()}}}function Jr(i){let e,t,r,n;const l=[an,fn],s=[];function f(o,u){return 1}return e=f(),t=s[e]=l[e](i),{c(){t.c(),r=Y()},l(o){t.l(o),r=Y()},m(o,u){s[e].m(o,u),q(o,r,u),n=!0},p(o,u){t.p(o,u)},i(o){n||(H(t),n=!0)},o(o){P(t),n=!1},d(o){o&&D(r),s[e].d(o)}}}function fn(i){let e,t,r,n;return{c(){e=V("div"),this.h()},l(l){e=U(l,"DIV",{class:!0,style:!0}),W(e).forEach(D),this.h()},h(){I(e,"class","chart svelte-19r8f8"),b(e,"height",i[5]),b(e,"width",i[6]),b(e,"margin-left","0"),b(e,"margin-top","15px"),b(e,"margin-bottom","10px"),b(e,"overflow","visible"),b(e,"display",i[15]?"none":"inherit")},m(l,s){q(l,e,s),r||(n=Me(t=Ki.call(null,e,{config:i[0],...i[19],echartsOptions:i[9],seriesOptions:i[10],dispatch:i[18],renderer:i[8],connectGroup:i[13],seriesColors:i[12]})),r=!0)},p(l,s){s[0]&32&&b(e,"height",l[5]),s[0]&64&&b(e,"width",l[6]),s[0]&32768&&b(e,"display",l[15]?"none":"inherit"),t&&de(t.update)&&s[0]&538369&&t.update.call(null,{config:l[0],...l[19],echartsOptions:l[9],seriesOptions:l[10],dispatch:l[18],renderer:l[8],connectGroup:l[13],seriesColors:l[12]})},i:Le,o:Le,d(l){l&&D(e),r=!1,n()}}}function an(i){let e,t;return e=new sn({props:{height:i[5]}}),{c(){Q(e.$$.fragment)},l(r){K(e.$$.fragment,r)},m(r,n){Z(e,r,n),t=!0},p(r,n){const l={};n[0]&32&&(l.height=r[5]),e.$set(l)},i(r){t||(H(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){J(e,r)}}}function cn(i){let e,t,r,n;return{c(){e=jt("svg"),t=jt("rect"),r=jt("circle"),n=jt("path"),this.h()},l(l){e=zt(l,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0});var s=W(e);t=zt(s,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0}),W(t).forEach(D),r=zt(s,"circle",{cx:!0,cy:!0,r:!0}),W(r).forEach(D),n=zt(s,"path",{d:!0}),W(n).forEach(D),s.forEach(D),this.h()},h(){I(t,"x","3"),I(t,"y","3"),I(t,"width","18"),I(t,"height","18"),I(t,"rx","2"),I(r,"cx","8.5"),I(r,"cy","8.5"),I(r,"r","1.5"),I(n,"d","M20.4 14.5L16 10 4 20"),I(e,"xmlns","http://www.w3.org/2000/svg"),I(e,"width","12"),I(e,"height","12"),I(e,"viewBox","0 0 24 24"),I(e,"fill","none"),I(e,"stroke","#000"),I(e,"stroke-width","2"),I(e,"stroke-linecap","round"),I(e,"stroke-linejoin","round")},m(l,s){q(l,e,s),R(e,t),R(e,r),R(e,n)},p:Le,d(l){l&&D(e)}}}function vr(i){let e,t;return e=new ai({props:{text:"Download data",data:i[7],queryID:i[3],class:"download-button",display:i[17]}}),{c(){Q(e.$$.fragment)},l(r){K(e.$$.fragment,r)},m(r,n){Z(e,r,n),t=!0},p(r,n){const l={};n[0]&128&&(l.data=r[7]),n[0]&8&&(l.queryID=r[3]),n[0]&131072&&(l.display=r[17]),e.$set(l)},i(r){t||(H(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){J(e,r)}}}function $r(i){let e,t;return e=new Oi({props:{source:JSON.stringify(i[0],void 0,3),copyToClipboard:!0,$$slots:{default:[un]},$$scope:{ctx:i}}}),{c(){Q(e.$$.fragment)},l(r){K(e.$$.fragment,r)},m(r,n){Z(e,r,n),t=!0},p(r,n){const l={};n[0]&1&&(l.source=JSON.stringify(r[0],void 0,3)),n[0]&1|n[1]&1&&(l.$$scope={dirty:n,ctx:r}),e.$set(l)},i(r){t||(H(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){J(e,r)}}}function un(i){let e=JSON.stringify(i[0],void 0,3)+"",t;return{c(){t=ri(e)},l(r){t=ii(r,e)},m(r,n){q(r,t,n)},p(r,n){n[0]&1&&e!==(e=JSON.stringify(r[0],void 0,3)+"")&&ni(t,e)},d(r){r&&D(t)}}}function ei(i){let e,t,r,n;return{c(){e=V("div"),this.h()},l(l){e=U(l,"DIV",{class:!0,style:!0}),W(e).forEach(D),this.h()},h(){I(e,"class","chart svelte-19r8f8"),b(e,"display","none"),b(e,"visibility","visible"),b(e,"height",i[5]),b(e,"width","666px"),b(e,"margin-left","0"),b(e,"margin-top","15px"),b(e,"margin-bottom","15px"),b(e,"overflow","visible")},m(l,s){q(l,e,s),r||(n=Me(t=Zi.call(null,e,{config:i[0],...i[19],echartsOptions:i[9],seriesOptions:i[10],seriesColors:i[12],queryID:i[3],evidenceChartTitle:i[4]})),r=!0)},p(l,s){s[0]&32&&b(e,"height",l[5]),t&&de(t.update)&&s[0]&529945&&t.update.call(null,{config:l[0],...l[19],echartsOptions:l[9],seriesOptions:l[10],seriesColors:l[12],queryID:l[3],evidenceChartTitle:l[4]})},d(l){l&&D(e),r=!1,n()}}}function hn(i){let e,t,r,n,l='<div><input type="textarea" style="width:7vw;height:7vh" placeholder="Annotate ..."/></div>',s,f,o,u,g,a,h,k,_,A,z,d,T,E,C=Hr(i[1]),p=[];for(let m=0;m<C.length;m+=1)p[m]=Zr(Kr(i,C,m));let j=!i[16]&&Jr(i);u=new nn({props:{config:i[0],height:i[5],width:i[6],copying:i[15],printing:i[16],echartsOptions:i[9],seriesOptions:i[10],seriesColors:i[12]}}),h=new ai({props:{text:"Save image",class:"download-button",downloadData:i[25],display:i[17],queryID:i[3],$$slots:{default:[cn]},$$scope:{ctx:i}}});let O=i[7]&&vr(i),y=i[11]&&!i[16]&&$r(i),w=i[14]&&ei(i);return{c(){e=V("div"),t=V("ul");for(let m=0;m<p.length;m+=1)p[m].c();r=te(),n=V("li"),n.innerHTML=l,s=te(),f=V("div"),j&&j.c(),o=te(),Q(u.$$.fragment),g=te(),a=V("div"),Q(h.$$.fragment),k=te(),O&&O.c(),_=te(),y&&y.c(),A=te(),w&&w.c(),z=Y(),this.h()},l(m){e=U(m,"DIV",{class:!0});var L=W(e);t=U(L,"UL",{class:!0});var M=W(t);for(let F=0;F<p.length;F+=1)p[F].l(M);r=re(M),n=U(M,"LI",{class:!0,"data-svelte-h":!0}),ti(n)!=="svelte-1fqftvc"&&(n.innerHTML=l),M.forEach(D),L.forEach(D),s=re(m),f=U(m,"DIV",{role:!0,class:!0});var N=W(f);j&&j.l(N),o=re(N),K(u.$$.fragment,N),g=re(N),a=U(N,"DIV",{class:!0});var B=W(a);K(h.$$.fragment,B),k=re(B),O&&O.l(B),B.forEach(D),_=re(N),y&&y.l(N),N.forEach(D),A=re(m),w&&w.l(m),z=Y(),this.h()},h(){I(n,"class","menu-option larger-height "),I(t,"class","menu-options"),I(e,"class","menu"),I(a,"class","chart-footer svelte-19r8f8"),I(f,"role","none"),I(f,"class","chart-container svelte-19r8f8")},m(m,L){q(m,e,L),R(e,t);for(let M=0;M<p.length;M+=1)p[M]&&p[M].m(t,null);R(t,r),R(t,n),q(m,s,L),q(m,f,L),j&&j.m(f,null),R(f,o),Z(u,f,null),R(f,g),R(f,a),Z(h,a,null),R(a,k),O&&O.m(a,null),R(f,_),y&&y.m(f,null),q(m,A,L),w&&w.m(m,L),q(m,z,L),d=!0,T||(E=[ge(window,"copy",i[20]),ge(window,"beforeprint",i[21]),ge(window,"afterprint",i[22]),ge(window,"export-beforeprint",i[23]),ge(window,"export-afterprint",i[24]),ge(f,"mouseenter",i[26]),ge(f,"mouseleave",i[27])],T=!0)},p(m,L){if(L[0]&6){C=Hr(m[1]);let B;for(B=0;B<C.length;B+=1){const F=Kr(m,C,B);p[B]?p[B].p(F,L):(p[B]=Zr(F),p[B].c(),p[B].m(t,r))}for(;B<p.length;B+=1)p[B].d(1);p.length=C.length}m[16]?j&&(ft(),P(j,1,1,()=>{j=null}),at()):j?(j.p(m,L),L[0]&65536&&H(j,1)):(j=Jr(m),j.c(),H(j,1),j.m(f,o));const M={};L[0]&1&&(M.config=m[0]),L[0]&32&&(M.height=m[5]),L[0]&64&&(M.width=m[6]),L[0]&32768&&(M.copying=m[15]),L[0]&65536&&(M.printing=m[16]),L[0]&512&&(M.echartsOptions=m[9]),L[0]&1024&&(M.seriesOptions=m[10]),L[0]&4096&&(M.seriesColors=m[12]),u.$set(M);const N={};L[0]&16384&&(N.downloadData=m[25]),L[0]&131072&&(N.display=m[17]),L[0]&8&&(N.queryID=m[3]),L[1]&1&&(N.$$scope={dirty:L,ctx:m}),h.$set(N),m[7]?O?(O.p(m,L),L[0]&128&&H(O,1)):(O=vr(m),O.c(),H(O,1),O.m(a,null)):O&&(ft(),P(O,1,1,()=>{O=null}),at()),m[11]&&!m[16]?y?(y.p(m,L),L[0]&67584&&H(y,1)):(y=$r(m),y.c(),H(y,1),y.m(f,null)):y&&(ft(),P(y,1,1,()=>{y=null}),at()),m[14]?w?w.p(m,L):(w=ei(m),w.c(),w.m(z.parentNode,z)):w&&(w.d(1),w=null)},i(m){d||(H(j),H(u.$$.fragment,m),H(h.$$.fragment,m),H(O),H(y),d=!0)},o(m){P(j),P(u.$$.fragment,m),P(h.$$.fragment,m),P(O),P(y),d=!1},d(m){m&&(D(e),D(s),D(f),D(A),D(z)),di(p,m),j&&j.d(),J(u),J(h),O&&O.d(),y&&y.d(),w&&w.d(m),T=!1,_r(E)}}}function mn(i,e,t){const r=["config","contextMenuOptions","contextMenuClickHandler","queryID","evidenceChartTitle","height","width","data","renderer","echartsOptions","seriesOptions","printEchartsConfig","seriesColors","connectGroup"];let n=Nr(e,r),{config:l=void 0}=e,{contextMenuOptions:s=[]}=e,{contextMenuClickHandler:f=()=>{}}=e,{queryID:o=void 0}=e,{evidenceChartTitle:u=void 0}=e,{height:g="291px"}=e,{width:a="100%"}=e,{data:h}=e,{renderer:k=void 0}=e,{echartsOptions:_=void 0}=e,{seriesOptions:A=void 0}=e,{printEchartsConfig:z}=e,{seriesColors:d=void 0}=e,{connectGroup:T=void 0}=e;const E=yi();let C=!1,p=!1,j=!1,O=!1;console.log(" -- -from ECharts.svelte ****");const y=()=>{t(15,p=!0),bi(),setTimeout(()=>{t(15,p=!1)},0)},w=()=>t(16,j=!0),m=()=>t(16,j=!1),L=()=>t(16,j=!0),M=()=>t(16,j=!1),N=()=>{t(14,C=!0),setTimeout(()=>{t(14,C=!1)},0)},B=()=>t(17,O=!0),F=()=>t(17,O=!1);return i.$$set=x=>{e=ct(ct({},e),yr(x)),t(19,n=Nr(e,r)),"config"in x&&t(0,l=x.config),"contextMenuOptions"in x&&t(1,s=x.contextMenuOptions),"contextMenuClickHandler"in x&&t(2,f=x.contextMenuClickHandler),"queryID"in x&&t(3,o=x.queryID),"evidenceChartTitle"in x&&t(4,u=x.evidenceChartTitle),"height"in x&&t(5,g=x.height),"width"in x&&t(6,a=x.width),"data"in x&&t(7,h=x.data),"renderer"in x&&t(8,k=x.renderer),"echartsOptions"in x&&t(9,_=x.echartsOptions),"seriesOptions"in x&&t(10,A=x.seriesOptions),"printEchartsConfig"in x&&t(11,z=x.printEchartsConfig),"seriesColors"in x&&t(12,d=x.seriesColors),"connectGroup"in x&&t(13,T=x.connectGroup)},[l,s,f,o,u,g,a,h,k,_,A,z,d,T,C,p,j,O,E,n,y,w,m,L,M,N,B,F]}class gn extends gt{constructor(e){super(),dt(this,e,mn,hn,mt,{config:0,contextMenuOptions:1,contextMenuClickHandler:2,queryID:3,evidenceChartTitle:4,height:5,width:6,data:7,renderer:8,echartsOptions:9,seriesOptions:10,printEchartsConfig:11,seriesColors:12,connectGroup:13},null,[-1,-1])}}function ht(i,e){const t=new Set(i.map(r=>r[e]));return Array.from(t)}function dn(i,e){return Ke(i,Ti({count:Ai(e)}))[0].count}function yn(i,e,t){let r;if(typeof t!="object")r=Ke(i,Fr(e,Ur({xTotal:Pr(t)})),gr({percentOfX:Yr(t,"xTotal")}),Vr({[t]:t+"_raw",percentOfX:t+"_pct"}));else{r=Ke(i,gr({valueSum:0}));for(let n=0;n<r.length;n++){r[n].valueSum=0;for(let l=0;l<t.length;l++)r[n].valueSum=r[n].valueSum+r[n][t[l]]}r=Ke(r,Fr(e,Ur({xTotal:Pr("valueSum")})));for(let n=0;n<t.length;n++)r=Ke(r,gr({percentOfX:Yr(t[n],"xTotal")}),Vr({[t[n]]:t[n]+"_raw",percentOfX:t[n]+"_pct"}))}return r}function dr(i,e,t){return[...i].sort((r,n)=>(r[e]<n[e]?-1:1)*(t?1:-1))}function bn(i,e,t){const r=e+t;return i%r<e?0:1}function _n(i){let e,t;return e=new ci({props:{error:i[13],chartType:i[6]}}),{c(){Q(e.$$.fragment)},l(r){K(e.$$.fragment,r)},m(r,n){Z(e,r,n),t=!0},p(r,n){const l={};n[0]&8192&&(l.error=r[13]),n[0]&64&&(l.chartType=r[6]),e.$set(l)},i(r){t||(H(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){J(e,r)}}}function pn(i){let e,t,r,n,l;const s=i[119].default,f=li(s,i,i[118],null),o=[wn,Cn],u=[];function g(a,h){return a[15].series.length?1:0}return t=g(i),r=u[t]=o[t](i),{c(){f&&f.c(),e=te(),r.c(),n=Y()},l(a){f&&f.l(a),e=re(a),r.l(a),n=Y()},m(a,h){f&&f.m(a,h),q(a,e,h),u[t].m(a,h),q(a,n,h),l=!0},p(a,h){f&&f.p&&(!l||h[3]&33554432)&&oi(f,s,a,a[118],l?fi(s,a[118],h,null):si(a[118]),null);let k=t;t=g(a),t===k?u[t].p(a,h):(ft(),P(u[k],1,1,()=>{u[k]=null}),at(),r=u[t],r?r.p(a,h):(r=u[t]=o[t](a),r.c()),H(r,1),r.m(n.parentNode,n))},i(a){l||(H(f,a),H(r),l=!0)},o(a){P(f,a),P(r),l=!1},d(a){a&&(D(e),D(n)),f&&f.d(a),u[t].d(a)}}}function Cn(i){let e,t;return e=new gn({props:{config:i[15],height:i[14],width:i[12],data:i[0],queryID:i[3],evidenceChartTitle:i[5],showAllXAxisLabels:i[4],swapXY:i[2],echartsOptions:i[7],seriesOptions:i[8],printEchartsConfig:i[1],renderer:i[10],connectGroup:i[11],seriesColors:i[9]}}),{c(){Q(e.$$.fragment)},l(r){K(e.$$.fragment,r)},m(r,n){Z(e,r,n),t=!0},p(r,n){const l={};n[0]&32768&&(l.config=r[15]),n[0]&16384&&(l.height=r[14]),n[0]&4096&&(l.width=r[12]),n[0]&1&&(l.data=r[0]),n[0]&8&&(l.queryID=r[3]),n[0]&32&&(l.evidenceChartTitle=r[5]),n[0]&16&&(l.showAllXAxisLabels=r[4]),n[0]&4&&(l.swapXY=r[2]),n[0]&128&&(l.echartsOptions=r[7]),n[0]&256&&(l.seriesOptions=r[8]),n[0]&2&&(l.printEchartsConfig=r[1]),n[0]&1024&&(l.renderer=r[10]),n[0]&2048&&(l.connectGroup=r[11]),n[0]&512&&(l.seriesColors=r[9]),e.$set(l)},i(r){t||(H(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){J(e,r)}}}function wn(i){let e,t;return e=new ui({props:{emptySet:"pass"}}),{c(){Q(e.$$.fragment)},l(r){K(e.$$.fragment,r)},m(r,n){Z(e,r,n),t=!0},p:Le,i(r){t||(H(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){J(e,r)}}}function kn(i){let e,t,r,n;const l=[pn,_n],s=[];function f(o,u){return o[13]?1:0}return e=f(i),t=s[e]=l[e](i),{c(){t.c(),r=Y()},l(o){t.l(o),r=Y()},m(o,u){s[e].m(o,u),q(o,r,u),n=!0},p(o,u){let g=e;e=f(o),e===g?s[e].p(o,u):(ft(),P(s[g],1,1,()=>{s[g]=null}),at(),t=s[e],t?t.p(o,u):(t=s[e]=l[e](o),t.c()),H(t,1),t.m(r.parentNode,r))},i(o){n||(H(t),n=!0)},o(o){P(t),n=!1},d(o){o&&D(r),s[e].d(o)}}}function Sn(i,e,t){let r,{$$slots:n={},$$scope:l}=e,s=Wr({}),f=Wr({});_i(i,f,c=>t(15,r=c));let{data:o=void 0}=e,{queryID:u=void 0}=e,{x:g=void 0}=e,{y:a=void 0}=e,{y2:h=void 0}=e,{series:k=void 0}=e,{size:_=void 0}=e,{tooltipTitle:A=void 0}=e,{showAllXAxisLabels:z=!1}=e,{printEchartsConfig:d=!1}=e;const T=!!a,E=!!g;let{swapXY:C=!1}=e,{title:p=void 0}=e,{subtitle:j=void 0}=e,{chartType:O="Chart"}=e,{bubble:y=!1}=e,{hist:w=!1}=e,{boxplot:m=!1}=e,L,{xType:M=void 0}=e,{xAxisTitle:N="false"}=e,{xBaseline:B=!0}=e,{xTickMarks:F=!1}=e,{xGridlines:x=!1}=e,{xAxisLabels:ye=!0}=e,{sort:be=!0}=e,{xFmt:yt=void 0}=e,{xMin:bt=void 0}=e,{xMax:_t=void 0}=e,{yLog:fe=!1}=e,{yType:pt=fe===!0?"log":"value"}=e,{yLogBase:Ct=10}=e,{yAxisTitle:ie="false"}=e,{yBaseline:_e=!1}=e,{yTickMarks:pe=!1}=e,{yGridlines:Ce=!0}=e,{yAxisLabels:we=!0}=e,{yMin:Ze=void 0}=e,{yMax:wt=void 0}=e,{yScale:ke=!1}=e,{yFmt:Je=void 0}=e,{yAxisColor:ue="true"}=e,{y2AxisTitle:he="false"}=e,{y2Baseline:De=!1}=e,{y2TickMarks:Ee=!1}=e,{y2Gridlines:xe=!0}=e,{y2AxisLabels:Ie=!0}=e,{y2Min:kt=void 0}=e,{y2Max:qt=void 0}=e,{y2Scale:je=!1}=e,{y2Fmt:ve=void 0}=e,{y2AxisColor:me="true"}=e,{sizeFmt:St=void 0}=e,{colorPalette:$=void 0}=e,{legend:ne=void 0}=e,{echartsOptions:kr=void 0}=e,{seriesOptions:Sr=void 0}=e,{seriesColors:Or=void 0}=e,{stackType:Ft=void 0}=e,{stacked100:$e=!1}=e,{chartAreaHeight:le}=e,{renderer:Tr=void 0}=e,{connectGroup:Ar=void 0}=e,G,Ot,Tt=[],ze=[],Wt,et,oe,Vt,se,X,ae,At,Ut,tt,Lt,Xt,Mt,Ne,Rt,Yt,rt,Be,Qt,Kt,Zt,Jt,vt,$t,er,tr,rr,ir,nr,Ge,it,nt,Dt,Et,lr,or,He,sr,fr,xt,Lr,ar,Se=[],Pe=!0,ce=[],lt=[],ee,ot,cr,Oe;return i.$$set=c=>{"data"in c&&t(0,o=c.data),"queryID"in c&&t(3,u=c.queryID),"x"in c&&t(17,g=c.x),"y"in c&&t(18,a=c.y),"y2"in c&&t(41,h=c.y2),"series"in c&&t(42,k=c.series),"size"in c&&t(43,_=c.size),"tooltipTitle"in c&&t(44,A=c.tooltipTitle),"showAllXAxisLabels"in c&&t(4,z=c.showAllXAxisLabels),"printEchartsConfig"in c&&t(1,d=c.printEchartsConfig),"swapXY"in c&&t(2,C=c.swapXY),"title"in c&&t(5,p=c.title),"subtitle"in c&&t(45,j=c.subtitle),"chartType"in c&&t(6,O=c.chartType),"bubble"in c&&t(46,y=c.bubble),"hist"in c&&t(47,w=c.hist),"boxplot"in c&&t(48,m=c.boxplot),"xType"in c&&t(19,M=c.xType),"xAxisTitle"in c&&t(20,N=c.xAxisTitle),"xBaseline"in c&&t(21,B=c.xBaseline),"xTickMarks"in c&&t(22,F=c.xTickMarks),"xGridlines"in c&&t(23,x=c.xGridlines),"xAxisLabels"in c&&t(24,ye=c.xAxisLabels),"sort"in c&&t(25,be=c.sort),"xFmt"in c&&t(49,yt=c.xFmt),"xMin"in c&&t(50,bt=c.xMin),"xMax"in c&&t(51,_t=c.xMax),"yLog"in c&&t(26,fe=c.yLog),"yType"in c&&t(52,pt=c.yType),"yLogBase"in c&&t(53,Ct=c.yLogBase),"yAxisTitle"in c&&t(27,ie=c.yAxisTitle),"yBaseline"in c&&t(28,_e=c.yBaseline),"yTickMarks"in c&&t(29,pe=c.yTickMarks),"yGridlines"in c&&t(30,Ce=c.yGridlines),"yAxisLabels"in c&&t(31,we=c.yAxisLabels),"yMin"in c&&t(54,Ze=c.yMin),"yMax"in c&&t(55,wt=c.yMax),"yScale"in c&&t(32,ke=c.yScale),"yFmt"in c&&t(56,Je=c.yFmt),"yAxisColor"in c&&t(57,ue=c.yAxisColor),"y2AxisTitle"in c&&t(33,he=c.y2AxisTitle),"y2Baseline"in c&&t(34,De=c.y2Baseline),"y2TickMarks"in c&&t(35,Ee=c.y2TickMarks),"y2Gridlines"in c&&t(36,xe=c.y2Gridlines),"y2AxisLabels"in c&&t(37,Ie=c.y2AxisLabels),"y2Min"in c&&t(58,kt=c.y2Min),"y2Max"in c&&t(59,qt=c.y2Max),"y2Scale"in c&&t(38,je=c.y2Scale),"y2Fmt"in c&&t(60,ve=c.y2Fmt),"y2AxisColor"in c&&t(61,me=c.y2AxisColor),"sizeFmt"in c&&t(62,St=c.sizeFmt),"colorPalette"in c&&t(63,$=c.colorPalette),"legend"in c&&t(39,ne=c.legend),"echartsOptions"in c&&t(7,kr=c.echartsOptions),"seriesOptions"in c&&t(8,Sr=c.seriesOptions),"seriesColors"in c&&t(9,Or=c.seriesColors),"stackType"in c&&t(64,Ft=c.stackType),"stacked100"in c&&t(65,$e=c.stacked100),"chartAreaHeight"in c&&t(40,le=c.chartAreaHeight),"renderer"in c&&t(10,Tr=c.renderer),"connectGroup"in c&&t(11,Ar=c.connectGroup),"$$scope"in c&&t(118,l=c.$$scope)},i.$$.update=()=>{var c,Mr,Dr,Er,xr,Ir;if(i.$$.dirty[0]&2&&t(1,d=d==="true"||d===!0),i.$$.dirty[0]&4&&(C==="true"||C===!0?t(2,C=!0):t(2,C=!1)),i.$$.dirty[0]&2097152&&t(21,B=B==="true"||B===!0),i.$$.dirty[0]&4194304&&t(22,F=F==="true"||F===!0),i.$$.dirty[0]&8388608&&t(23,x=x==="true"||x===!0),i.$$.dirty[0]&16777216&&t(24,ye=ye==="true"||ye===!0),i.$$.dirty[0]&33554432&&t(25,be=be==="true"||be===!0),i.$$.dirty[0]&67108864&&t(26,fe=fe==="true"||fe===!0),i.$$.dirty[0]&268435456&&t(28,_e=_e==="true"||_e===!0),i.$$.dirty[0]&536870912&&t(29,pe=pe==="true"||pe===!0),i.$$.dirty[0]&1073741824&&t(30,Ce=Ce==="true"||Ce===!0),i.$$.dirty[1]&1&&t(31,we=we==="true"||we===!0),i.$$.dirty[1]&2&&t(32,ke=ke==="true"||ke===!0),i.$$.dirty[1]&8&&t(34,De=De==="true"||De===!0),i.$$.dirty[1]&16&&t(35,Ee=Ee==="true"||Ee===!0),i.$$.dirty[1]&32&&t(36,xe=xe==="true"||xe===!0),i.$$.dirty[1]&64&&t(37,Ie=Ie==="true"||Ie===!0),i.$$.dirty[1]&128&&t(38,je=je==="true"||je===!0),i.$$.dirty[0]&2147364965|i.$$.dirty[1]&2147483647|i.$$.dirty[2]&2147483647|i.$$.dirty[3]&33554431)try{if(t(13,ot=void 0),t(111,Se=[]),t(70,ze=[]),t(113,ce=[]),t(114,lt=[]),t(72,et=[]),qr(o),t(67,G=mr(o)),t(68,Ot=Object.keys(G)),E||t(17,g=Ot[0]),!T){t(69,Tt=Ot.filter(function(S){return![g,k,_].includes(S)}));for(let S=0;S<Tt.length;S++)t(72,et=Tt[S]),t(71,Wt=G[et].type),Wt==="number"&&ze.push(et);t(18,a=ze.length>1?ze:ze[0])}y?t(66,L={x:g,y:a,size:_}):w?t(66,L={x:g}):m?t(66,L={}):t(66,L={x:g,y:a});for(let S in L)L[S]==null&&Se.push(S);if(Se.length===1)throw Error(new Intl.ListFormat().format(Se)+" is required");if(Se.length>1)throw Error(new Intl.ListFormat().format(Se)+" are required");if($e===!0&&a.includes("_pct")&&Pe===!1)if(typeof a=="object"){for(let S=0;S<a.length;S++)t(18,a[S]=a[S].replace("_pct",""),a);t(112,Pe=!1)}else t(18,a=a.replace("_pct","")),t(112,Pe=!1);if(g&&ce.push(g),a)if(typeof a=="object")for(t(115,ee=0);ee<a.length;t(115,ee++,ee))ce.push(a[ee]);else ce.push(a);if(h)if(typeof h=="object")for(t(115,ee=0);ee<h.length;t(115,ee++,ee))ce.push(h[ee]);else ce.push(h);if(_&&ce.push(_),k&&lt.push(k),A&&lt.push(A),qr(o,ce,lt),$e===!0){if(t(0,o=yn(o,g,a)),typeof a=="object"){for(let S=0;S<a.length;S++)t(18,a[S]=a[S]+"_pct",a);t(112,Pe=!1)}else t(18,a=a+"_pct"),t(112,Pe=!1);t(67,G=mr(o))}switch(t(73,oe=G[g].type),oe){case"number":t(73,oe="value");break;case"string":t(73,oe="category");break;case"date":t(73,oe="time");break;default:break}if(t(19,M=M==="category"?"category":oe),C&&M!=="category")throw Error("Horizontal charts do not support a value or time-based x-axis. You can either change your SQL query to output string values or set swapXY=false.");if(C&&h)throw Error("Horizontal charts do not support a secondary y-axis. You can either set swapXY=false or remove the y2 prop from your chart.");if(C&&t(19,M="category"),t(74,Vt=oe==="value"&&M==="category"),t(0,o=be?oe==="category"?dr(o,a,!1):dr(o,g,!0):o),oe==="time"&&t(0,o=dr(o,g,!0)),t(116,cr=mr(o,"array")),t(117,Oe=cr.filter(S=>S.type==="date")),t(117,Oe=Oe.map(S=>S.id)),Oe.length>0)for(let S=0;S<Oe.length;S++)t(0,o=ji(o,Oe[S]));yt?t(75,se=Re(yt,(c=G[g].format)==null?void 0:c.valueType)):t(75,se=G[g].format),a?Je?typeof a=="object"?t(76,X=Re(Je,(Mr=G[a[0]].format)==null?void 0:Mr.valueType)):t(76,X=Re(Je,(Dr=G[a].format)==null?void 0:Dr.valueType)):typeof a=="object"?t(76,X=G[a[0]].format):t(76,X=G[a].format):t(76,X="str"),h&&(ve?typeof h=="object"?t(77,ae=Re(ve,(Er=G[h[0]].format)==null?void 0:Er.valueType)):t(77,ae=Re(ve,(xr=G[h].format)==null?void 0:xr.valueType)):typeof h=="object"?t(77,ae=G[h[0]].format):t(77,ae=G[h].format)),_&&(St?t(78,At=Re(St,(Ir=G[_].format)==null?void 0:Ir.valueType)):t(78,At=G[_].format)),t(79,Ut=G[g].columnUnitSummary),a&&(typeof a=="object"?t(80,tt=G[a[0]].columnUnitSummary):t(80,tt=G[a].columnUnitSummary)),h&&(typeof h=="object"?t(81,Lt=G[h[0]].columnUnitSummary):t(81,Lt=G[h].columnUnitSummary)),t(20,N=N==="true"?Xe(g,se):N==="false"?"":N),t(27,ie=ie==="true"?typeof a=="object"?"":Xe(a,X):ie==="false"?"":ie),t(33,he=he==="true"?typeof h=="object"?"":Xe(h,ae):he==="false"?"":he);let qe=typeof a=="object"?a.length:1,jr=k?dn(o,k):1,Te=qe*jr,ur=typeof h=="object"?h.length:h?1:0,hr=Te+ur;if(ne!==void 0&&t(39,ne=ne==="true"||ne===!0),t(39,ne=ne??hr>1),$e===!0&&fe===!0)throw Error("Log axis cannot be used in a 100% stacked chart");if(Ft==="stacked"&&hr>1&&fe===!0)throw Error("Log axis cannot be used in a stacked chart");let Fe;if(typeof a=="object"){Fe=G[a[0]].columnUnitSummary.min;for(let S=0;S<a.length;S++)G[a[S]].columnUnitSummary.min<Fe&&(Fe=G[a[S]].columnUnitSummary.min)}else a&&(Fe=G[a].columnUnitSummary.min);if(fe===!0&&Fe<=0&&Fe!==null)throw Error("Log axis cannot display values less than or equal to zero");s.update(S=>({...S,data:o,x:g,y:a,y2:h,series:k,swapXY:C,sort:be,xType:M,xFormat:se,yFormat:X,y2Format:ae,sizeFormat:At,xMismatch:Vt,size:_,yMin:Ze,y2Min:kt,columnSummary:G,xAxisTitle:N,yAxisTitle:ie,y2AxisTitle:he,tooltipTitle:A,chartAreaHeight:le,chartType:O,yCount:qe,y2Count:ur})),t(82,Xt=ht(o,g));let zr;if(C?t(83,Mt={type:pt,logBase:Ct,position:"top",axisLabel:{show:we,hideOverlap:!0,showMaxLabel:!0,formatter(S){return Nt(S,X,tt)},margin:4},min:Ze,max:wt,scale:ke,splitLine:{show:Ce},axisLine:{show:_e,onZero:!1},axisTick:{show:pe},boundaryGap:!1,z:2}):t(83,Mt={type:M,min:bt,max:_t,splitLine:{show:x},axisLine:{show:B},axisTick:{show:F},axisLabel:{show:ye,hideOverlap:!0,showMaxLabel:M==="category"||M==="value",formatter:M==="time"||M==="category"?!1:function(S){return Nt(S,se,Ut)},margin:6},scale:!0,z:2}),C?t(84,Ne={type:M,inverse:"true",splitLine:{show:x},axisLine:{show:B},axisTick:{show:F},axisLabel:{show:ye,hideOverlap:!0},scale:!0,min:bt,max:_t,z:2}):(t(84,Ne={type:pt,logBase:Ct,splitLine:{show:Ce},axisLine:{show:_e,onZero:!1},axisTick:{show:pe},axisLabel:{show:we,hideOverlap:!0,margin:4,formatter(S){return Nt(S,X,tt)},color:h?ue==="true"?$?$[0]:st[0]:ue!=="false"?ue:void 0:void 0},name:ie,nameLocation:"end",nameTextStyle:{align:"left",verticalAlign:"top",padding:[0,5,0,0],color:h?ue==="true"?$?$[0]:st[0]:ue!=="false"?ue:void 0:void 0},nameGap:6,min:Ze,max:wt,scale:ke,boundaryGap:["0%","1%"],z:2}),zr={type:"value",show:!1,alignTicks:!0,splitLine:{show:xe},axisLine:{show:De,onZero:!1},axisTick:{show:Ee},axisLabel:{show:Ie,hideOverlap:!0,margin:4,formatter(S){return Nt(S,ae,Lt)},color:me==="true"?$?$[Te]:st[Te]:me!=="false"?me:void 0},name:he,nameLocation:"end",nameTextStyle:{align:"right",verticalAlign:"top",padding:[0,0,0,5],color:me==="true"?$?$[Te]:st[Te]:me!=="false"?me:void 0},nameGap:6,min:kt,max:qt,scale:je,boundaryGap:["0%","1%"],z:2},t(84,Ne=[Ne,zr])),le){if(t(40,le=Number(le)),isNaN(le))throw Error("chartAreaHeight must be a number");if(le<=0)throw Error("chartAreaHeight must be a positive number")}else t(40,le=180);t(87,rt=!!p),t(88,Be=!!j),t(89,Qt=ne*(k!==null||typeof a=="object"&&a.length>1)),t(90,Kt=ie!==""&&C),t(91,Zt=N!==""&&!C),t(92,Jt=15),t(93,vt=13),t(94,$t=6*Be),t(95,er=rt*Jt+Be*vt+$t*Math.max(rt,Be)),t(96,tr=10),t(97,rr=8),t(98,ir=14),t(99,nr=14),t(100,Ge=15),t(100,Ge=Ge*Qt),t(101,it=7),t(101,it=it*Math.max(rt,Be)),t(102,nt=er+it),t(103,Dt=nt+Ge+nr*Kt+tr),t(104,Et=Zt*ir+rr),t(108,sr=8),t(110,xt=1),C&&(t(109,fr=Xt.length),t(110,xt=Math.max(1,fr/sr))),t(105,lr=le*xt+Dt+Et),t(106,or=nt+Ge+7),t(14,Lr=lr+"px"),t(12,ar="100%"),t(107,He=C?ie:N),He!==""&&t(107,He=He+" â†’"),t(85,Rt={id:"horiz-axis-title",type:"text",style:{text:He,textAlign:"right",fill:v.grey500},cursor:"auto",right:C?"2%":"3%",top:C?or:null,bottom:C?null:"2%"}),t(86,Yt={title:{text:p,subtext:j,subtextStyle:{width:ar}},tooltip:{trigger:"axis",formatter(S){let We,Ve,Ue,It;if(hr>1){Ve=S[0].value[C?1:0],We=`<span id="tooltip" style='font-weight: 600;'>${Ye(Ve,se)}</span>`;for(let Ae=S.length-1;Ae>=0;Ae--)S[Ae].seriesName!=="stackTotal"&&(Ue=S[Ae].value[C?0:1],We=We+`<br> ${S[Ae].marker} ${S[Ae].seriesName} <span style='float:right; margin-left: 10px;'>${Ye(Ue,bn(S[Ae].componentIndex,qe,ur)===0?X:ae)}</span>`)}else M==="value"?(Ve=S[0].value[C?1:0],Ue=S[0].value[C?0:1],It=S[0].seriesName,We=`<span id="tooltip" style='font-weight: 600;'>${Xe(g,se)}: </span><span style='float:right; margin-left: 10px;'>${Ye(Ve,se)}</span><br/><span style='font-weight: 600;'>${Xe(It,X)}: </span><span style='float:right; margin-left: 10px;'>${Ye(Ue,X)}</span>`):(Ve=S[0].value[C?1:0],Ue=S[0].value[C?0:1],It=S[0].seriesName,We=`<span id="tooltip" style='font-weight: 600;'>${Ye(Ve,se)}</span><br/><span>${Xe(It,X)}: </span><span style='float:right; margin-left: 10px;'>${Ye(Ue,X)}</span>`);return We},confine:!0,axisPointer:{type:"shadow"},extraCssText:"box-shadow: 0 3px 6px rgba(0,0,0,.15); box-shadow: 0 2px 4px rgba(0,0,0,.12); z-index: 1;",order:"valueDesc"},legend:{show:ne,type:"scroll",top:nt,padding:[0,0,0,0],data:[]},grid:{left:"0.5%",right:C?"4%":"3%",bottom:Et,top:Dt,containLabel:!0},xAxis:Mt,yAxis:Ne,series:[],animation:!0,graphic:Rt,color:$}),f.update(()=>Yt),console.log(" ***  -from _Chart.svelte")}catch(qe){if(t(13,ot=qe.message),console.error("\x1B[31m%s\x1B[0m",`Error in ${O}: ${qe.message}`),Li)throw ot;s.update(Te=>({...Te,error:ot}))}i.$$.dirty[0]&1},Gr(Mi,s),Gr(Di,f),[o,d,C,u,z,p,O,kr,Sr,Or,Tr,Ar,ar,ot,Lr,r,f,g,a,M,N,B,F,x,ye,be,fe,ie,_e,pe,Ce,we,ke,he,De,Ee,xe,Ie,je,ne,le,h,k,_,A,j,y,w,m,yt,bt,_t,pt,Ct,Ze,wt,Je,ue,kt,qt,ve,me,St,$,Ft,$e,L,G,Ot,Tt,ze,Wt,et,oe,Vt,se,X,ae,At,Ut,tt,Lt,Xt,Mt,Ne,Rt,Yt,rt,Be,Qt,Kt,Zt,Jt,vt,$t,er,tr,rr,ir,nr,Ge,it,nt,Dt,Et,lr,or,He,sr,fr,xt,Se,Pe,ce,lt,ee,cr,Oe,l,n]}class On extends gt{constructor(e){super(),dt(this,e,Sn,kn,mt,{data:0,queryID:3,x:17,y:18,y2:41,series:42,size:43,tooltipTitle:44,showAllXAxisLabels:4,printEchartsConfig:1,swapXY:2,title:5,subtitle:45,chartType:6,bubble:46,hist:47,boxplot:48,xType:19,xAxisTitle:20,xBaseline:21,xTickMarks:22,xGridlines:23,xAxisLabels:24,sort:25,xFmt:49,xMin:50,xMax:51,yLog:26,yType:52,yLogBase:53,yAxisTitle:27,yBaseline:28,yTickMarks:29,yGridlines:30,yAxisLabels:31,yMin:54,yMax:55,yScale:32,yFmt:56,yAxisColor:57,y2AxisTitle:33,y2Baseline:34,y2TickMarks:35,y2Gridlines:36,y2AxisLabels:37,y2Min:58,y2Max:59,y2Scale:38,y2Fmt:60,y2AxisColor:61,sizeFmt:62,colorPalette:63,legend:39,echartsOptions:7,seriesOptions:8,seriesColors:9,stackType:64,stacked100:65,chartAreaHeight:40,renderer:10,connectGroup:11},null,[-1,-1,-1,-1])}}function Tn(i){let e;const t=i[6].default,r=li(t,i,i[7],null);return{c(){r&&r.c()},l(n){r&&r.l(n)},m(n,l){r&&r.m(n,l),e=!0},p(n,l){r&&r.p&&(!e||l&128)&&oi(r,t,n,n[7],e?fi(t,n[7],l,null):si(n[7]),null)},i(n){e||(H(r,n),e=!0)},o(n){P(r,n),e=!1},d(n){r&&r.d(n)}}}function An(i){let e,t;const r=[i[4],{data:br.isQuery(i[10])?Array.from(i[10]):i[10]},{queryID:i[5]}];let n={$$slots:{default:[Tn]},$$scope:{ctx:i}};for(let l=0;l<r.length;l+=1)n=ct(n,r[l]);return e=new On({props:n}),{c(){Q(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,s){Z(e,l,s),t=!0},p(l,s){const f=s&1072?ki(r,[s&16&&Si(l[4]),s&1024&&{data:br.isQuery(l[10])?Array.from(l[10]):l[10]},s&32&&{queryID:l[5]}]):{};s&128&&(f.$$scope={dirty:s,ctx:l}),e.$set(f)},i(l){t||(H(e.$$.fragment,l),t=!0)},o(l){P(e.$$.fragment,l),t=!1},d(l){J(e,l)}}}function Ln(i){let e,t;return e=new ui({props:{slot:"empty",emptyMessage:i[2],emptySet:i[1],chartType:i[4].chartType,isInitial:i[3]}}),{c(){Q(e.$$.fragment)},l(r){K(e.$$.fragment,r)},m(r,n){Z(e,r,n),t=!0},p(r,n){const l={};n&4&&(l.emptyMessage=r[2]),n&2&&(l.emptySet=r[1]),n&16&&(l.chartType=r[4].chartType),n&8&&(l.isInitial=r[3]),e.$set(l)},i(r){t||(H(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){J(e,r)}}}function Mn(i){let e,t;return e=new ci({props:{slot:"error",chartType:i[4].chartType,error:i[10].error.message}}),{c(){Q(e.$$.fragment)},l(r){K(e.$$.fragment,r)},m(r,n){Z(e,r,n),t=!0},p(r,n){const l={};n&16&&(l.chartType=r[4].chartType),n&1024&&(l.error=r[10].error.message),e.$set(l)},i(r){t||(H(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){J(e,r)}}}function Dn(i){let e,t;return e=new Ei({props:{data:i[0],$$slots:{error:[Mn,({loaded:r})=>({10:r}),({loaded:r})=>r?1024:0],empty:[Ln],default:[An,({loaded:r})=>({10:r}),({loaded:r})=>r?1024:0]},$$scope:{ctx:i}}}),{c(){Q(e.$$.fragment)},l(r){K(e.$$.fragment,r)},m(r,n){Z(e,r,n),t=!0},p(r,[n]){const l={};n&1&&(l.data=r[0]),n&1182&&(l.$$scope={dirty:n,ctx:r}),e.$set(l)},i(r){t||(H(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){J(e,r)}}}function En(i,e,t){let r,{$$slots:n={},$$scope:l}=e,{data:s}=e;const f=br.isQuery(s)?s.hash:void 0;let o=(s==null?void 0:s.hash)===f,{emptySet:u=void 0}=e,{emptyMessage:g=void 0}=e,a=s==null?void 0:s.id;return i.$$set=h=>{t(9,e=ct(ct({},e),yr(h))),"data"in h&&t(0,s=h.data),"emptySet"in h&&t(1,u=h.emptySet),"emptyMessage"in h&&t(2,g=h.emptyMessage),"$$scope"in h&&t(7,l=h.$$scope)},i.$$.update=()=>{i.$$.dirty&1&&t(3,o=(s==null?void 0:s.hash)===f),t(4,r={...Object.fromEntries(Object.entries(e).filter(([,h])=>h!==void 0))})},e=yr(e),[s,u,g,o,r,a,n,l]}class Vn extends gt{constructor(e){super(),dt(this,e,En,Dn,mt,{data:0,emptySet:1,emptyMessage:2})}}function Un(i,e,t,r,n,l,s,f,o,u=void 0,g=void 0,a=void 0){function h(y,w,m,L){let M={name:w,data:y,yAxisIndex:m};return M={...L,...M},M}let k,_,A,z=[],d,T,E,C,p;function j(y,w){const m=[];function L(N){return typeof N>"u"}function M(N,B){L(N)||(Array.isArray(N)?N.forEach(F=>m.push([F,B])):m.push([N,B]))}return M(y,0),M(w,1),m}let O=j(t,a);if(r!=null&&O.length===1)for(C=ht(i,r),k=0;k<C.length;k++){if(T=i.filter(y=>y[r]===C[k]),n?d=T.map(y=>[y[O[0][0]],f?y[e].toString():y[e]]):d=T.map(y=>[f?y[e].toString():y[e],y[O[0][0]]]),u){let y=T.map(w=>w[u]);d.forEach((w,m)=>w.push(y[m]))}if(g){let y=T.map(w=>w[g]);d.forEach((w,m)=>w.push(y[m]))}E=C[k]??"null",p=O[0][1],A=h(d,E,p,l),z.push(A)}if(r!=null&&O.length>1)for(C=ht(i,r),k=0;k<C.length;k++)for(T=i.filter(y=>y[r]===C[k]),_=0;_<O.length;_++){if(n?d=T.map(y=>[y[O[_][0]],f?y[e].toString():y[e]]):d=T.map(y=>[f?y[e].toString():y[e],y[O[_][0]]]),u){let y=T.map(w=>w[u]);d.forEach((w,m)=>w.push(y[m]))}if(g){let y=T.map(w=>w[g]);d.forEach((w,m)=>w.push(y[m]))}E=(C[k]??"null")+" - "+o[O[_][0]].title,p=O[_][1],A=h(d,E,p,l),z.push(A)}if(r==null&&O.length>1)for(k=0;k<O.length;k++){if(n?d=i.map(y=>[y[O[k][0]],f?y[e].toString():y[e]]):d=i.map(y=>[f?y[e].toString():y[e],y[O[k][0]]]),u){let y=i.map(w=>w[u]);d.forEach((w,m)=>w.push(y[m]))}if(g){let y=i.map(w=>w[g]);d.forEach((w,m)=>w.push(y[m]))}E=o[O[k][0]].title,p=O[k][1],A=h(d,E,p,l),z.push(A)}if(r==null&&O.length===1){if(n?d=i.map(y=>[y[O[0][0]],f?y[e].toString():y[e]]):d=i.map(y=>[f?y[e].toString():y[e],y[O[0][0]]]),u){let y=i.map(w=>w[u]);d.forEach((w,m)=>w.push(y[m]))}if(g){let y=i.map(w=>w[g]);d.forEach((w,m)=>w.push(y[m]))}E=o[O[0][0]].title,p=O[0][1],A=h(d,E,p,l),z.push(A)}return z}function xn(i){let e=[];for(let t=1;t<i.length;t++)e.push(i[t]-i[t-1]);return e}function hi(i,e){return(typeof i!="number"||isNaN(i))&&(i=0),(typeof e!="number"||isNaN(e))&&(e=0),i=Math.abs(i),e=Math.abs(e),e<=.01?i:hi(e,i%e)}function In(i,e){if(!Array.isArray(i))throw new TypeError("Cannot calculate extent of non-array value.");let t,r;for(const n of i)typeof n=="number"&&(t===void 0?n>=n&&(t=r=n):(t>n&&(t=n),r<n&&(r=n)));return[t,r]}function jn(i,e){let[t,r]=In(i);const n=[];let l=t;for(;l<=r;)n.push(Math.round((l+Number.EPSILON)*1e8)/1e8),l+=e;return n}function zn(i){if(i.length<=1)return;i.sort(function(t,r){return t-r}),i=i.map(function(t){return t*1e8}),i=xn(i);let e=i.reduce((t,r)=>hi(t,r))/1e8;return e=Math.round((e+Number.EPSILON)*1e8)/1e8,e}function Xn(i,e,t,r,n=!1,l=!1){var k;let s=!1;const f=i.map(_=>Object.assign({},_,{[e]:_[e]instanceof Date?(s=!0,_[e].toISOString()):_[e]})).filter(_=>_[e]!==void 0&&_[e]!==null),o=Array.from(f).reduce((_,A)=>(A[e]instanceof Date&&(A[e]=A[e].toISOString(),s=!0),r?(_[A[r]??"null"]||(_[A[r]??"null"]=[]),_[A[r]??"null"].push(A)):(_.default||(_.default=[]),_.default.push(A)),_),{}),u={};let g;const a=((k=f.find(_=>_&&_[e]!==null&&_[e]!==void 0))==null?void 0:k[e])??null;switch(typeof a){case"object":throw a===null?new Error(`Column '${e}' is entirely null. Column must contain at least one non-null value.`):new Error("Unexpected object property, expected string, date, or number");case"number":if(g=ht(f,e),l){const _=zn(g);u[e]=jn(g,_)}break;case"string":g=ht(f,e),u[e]=g;break}const h=[];for(const _ of Object.values(o)){const A=r?{[r]:null}:{};if(n)if(t instanceof Array)for(let d=0;d<t.length;d++)A[t[d]]=0;else A[t]=0;else if(t instanceof Array)for(let d=0;d<t.length;d++)A[t[d]]=null;else A[t]=null;r&&(u[r]=r);const z=[];Object.keys(u).length===0?z.push(Xr([e],A)):z.push(Xr(u,A)),h.push(Ke(_,...z))}return s?h.flat().map(_=>({..._,[e]:new Date(_[e])})):h.flat()}export{Vn as C,gn as E,Un as a,bn as b,dr as c,Xn as g,qi as r};
